{"version":3,"sources":["webpack:///webpack/bootstrap e1ec1055f12e35182078","webpack:///./src/crmApp.js","webpack:///./src/common/crmEntity.js","webpack:///./src/common/crmProcess.js","webpack:///./src/common/crmGridList.js"],"names":["crmContext","Xrm","pars","name","Sys","crmAttr","attrname","Page","getAttribute","contname","getControl","crmEntity","ui","tabs","get","error","getval","getValue","Array","isArray","length","v","obj","arguments","id","mode","setVisible","getText","state","disabled","undefined","setDisabled","c","a","addOnChange","setTimeout","fireOnChange","removeOnChange","setRequiredLevel","m","modestr","setSubmitMode","val","type","toValue","userid","entityType","username","setFocus","message","window","console","save","handle","arr","value","key","valArr","concat","map","item","Tabs","indexOf","push","crmEntityHandle","columns","columns1","lookupById","columnArr","column1Arr","Controls","then","res","attrs","i","attrName","test","replace","attr","attributes","setTypeVal","viewDisplayName","fetchXml","entityName","get_dataContext","get_lookupTypeNames","split","columnsStr","join","layoutXml","addCustomView","addPreSearch","customFilter","addCustomFilter","fetchXmlFilter","change","guid","logicalName","refresh","attribute","_attribute","setmax","set_max","apply","ttribute","setmin","set_min","crmEntityOption","getIsDirty","data","refreshRibbon","Application","_components","crmGrid","Utility","openEntityForm","entity","getEntityName","getId","controls","getIsValid","arrCopy","conArr","forEach","tab","index","splice","bind","Sections","sections","section","sec","getSections","returnArr","control","controlType","getControlType","getName","getFirst","getFormType","context","getUserId","getUserName","options","getOptions","arrs","clearOptions","addOption","text","setValue","removeOption","crmProcess","uiProcess","process","dataProcess","reflow","setDisplayState","addOnStageChange","addOnStageSelected","getActivePath","getActiveProcess","getActiveStage","getEnabledProcesses","moveNext","movePrevious","removeOnStageChange","removeOnStageSelected","setActiveProcess","setActiveStage","crmGridList","logError","get_selectedIds","get_allRecords","get_allRecordIds"],"mappings":"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","file":"crmApp.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e1ec1055f12e35182078","import { crmEntity, crmAttr } from './common/crmEntity.js';\r\nimport { crmProcess } from './common/crmProcess.js';\r\nimport { crmGridList } from './common/crmGridList.js';\r\n/**\r\n * crmContext操作\r\n * @module crmContext\r\n */\r\nexport class crmContext {\r\n    /**\r\n     *crmContext 初始化对象\r\n     * ```javascript\r\n     *var newCrmContext = new crmContext(window.Xrm, { Sys: window.Sys});\r\n     *var attr = newCrmContext.attr.bind(newCrmContext);\r\n     *var entity = newCrmContext.entity;\r\n     *var process = newCrmContext.process;\r\n     *var crmGridList = newCrmContext.crmGridList.bind(newCrmContext);\r\n     *\r\n     * ```\r\n     * @class crmContext\r\n     * @constructor\r\n     * @param {object} [Xrm]\r\n     * @param {object} [pars] {Sys}\r\n    */\r\n    constructor(Xrm, pars) {\r\n        this.Xrm = Xrm;\r\n        this.pars = pars || {};\r\n    }\r\n    /**\r\n     * 获取crmAttr对象{{#crossLink \"crmAttr/getOpts\"}}{{/crossLink}}\r\n     * @method attr\r\n     * @param  {string} name 字段名\r\n     * @return {object} crmAttr对象\r\n     */\r\n    attr(name) {\r\n        return new crmAttr(this.Xrm, name);\r\n    }\r\n     /**\r\n     * 获取crmEntity对象\r\n     * @property entity\r\n     * @type object\r\n     */\r\n    get entity() {\r\n        return new crmEntity(this.Xrm, this.pars.Sys)\r\n    }\r\n    /**\r\n     * 获取crmProcess对象\r\n     * @property process\r\n     * @type object\r\n     */\r\n    get process() {\r\n        return new crmProcess(this.Xrm)\r\n    }\r\n    /**\r\n     * 获取crmGridList对象\r\n     * @method crmGridList\r\n     * @param  {string} name 子网格名称\r\n     * @return {object} crmGridList\r\n     */\r\n    crmGridList(name) {\r\n        return new crmGridList(this.pars.Sys, name)\r\n    }\r\n}\r\nexport default crmContext;\r\n// var  c  = { d: crmContext}\r\n// if (typeof exports !== 'undefined') {\r\n//     if (typeof module !== 'undefined' && module.exports) {\r\n//         exports = module.exports = c;\r\n//     }\r\n//     exports.c = c;\r\n// } else {\r\n//     window.c = c;\r\n// }\r\n// if (typeof define === 'function' && define.amd) {\r\n//     define('c', [], function() {\r\n//         return c;\r\n//     });\r\n// }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/crmApp.js","/**\r\n * 表单操作\r\n * @module Entity\r\n */\r\nexport class crmAttr {\r\n    /**\r\n     *crmAttr 初始化对象\r\n     * @class crmAttr\r\n     * @param {object} [Xrm]\r\n     * @param {object} [name]\r\n     * @constructor\r\n    */\r\n   /**\r\n    * getAttribute对象\r\n    * @property attrname\r\n    * @type object\r\n    */\r\n   /**\r\n    * getControl对象\r\n    * @property contname\r\n    * @type object\r\n    */\r\n    constructor(Xrm, name) {\r\n        if (!Xrm || !name) {\r\n            return;\r\n        }\r\n        this.Xrm = Xrm;\r\n        this.name = name;\r\n        this.attrname = Xrm.Page.getAttribute(this.name);\r\n        this.contname = Xrm.Page.getControl(this.name);\r\n        this.crmEntity = new crmEntity(Xrm);\r\n        if (!this.contname) {\r\n            this.contname = Xrm.Page.ui.tabs.get(this.name);\r\n        }\r\n        if (!this.attrname && !this.contname) {\r\n            this.error('not found ' + this.name);\r\n        }\r\n    }\r\n    /**\r\n       * 获取字段值\r\n       * @method getValue\r\n       * @return {object} value\r\n       * @example\r\n       *     attr('new_name').getValue();\r\n       */\r\n    getValue() {\r\n        let getval = null\r\n        if (this.attrname) {\r\n            getval = this.attrname.getValue();\r\n        }\r\n        return getval;\r\n    }\r\n    /**\r\n     * 获取字段值 Lookup返回第一个值\r\n     * @method get\r\n     * @return {object} value\r\n     */\r\n    get() {\r\n        if (!this.attrname) {\r\n            return this;\r\n        }\r\n        const getval = this.attrname.getValue() || {};\r\n        if (Array.isArray(getval)) {\r\n            return getval.length > 0 ? getval[0] : {}\r\n        }\r\n        return getval;\r\n    }\r\n    /**\r\n     * 设置和获取值\r\n     * @method val\r\n     * @param  {object} val 设置值\r\n     * @optional\r\n     * @return {object} this 获取值\r\n     * @example\r\n     *      attr('new_name').val() //获取值\r\n     *      attr('new_name').val('名称') //设置值并设置成始终提交 不触发chagne事件\r\n     */\r\n    val(v) {\r\n        let obj = null;\r\n        if (!this.attrname) {\r\n            return this;\r\n        }\r\n        obj = this.attrname[arguments.length > 0 ? 'setValue' : 'getValue'](v);\r\n        if (Array.isArray(obj)) {\r\n            obj = obj[0].id;\r\n        }\r\n        if (arguments.length > 0) {\r\n            this.mode();\r\n        }\r\n        return arguments.length === 0 ? obj : this;\r\n    }\r\n    /**\r\n     * 显示字段\r\n     * @method show\r\n     * @return {object} this\r\n     */\r\n    show() {\r\n        if (this.contname) {\r\n            this.contname.setVisible(!0);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * 隐藏字段\r\n     * @method hide\r\n     * @return {object} this\r\n     */\r\n    hide() {\r\n        if (this.contname) {\r\n            this.contname.setVisible(!1);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * 获取属性name|text值\r\n     * @method text\r\n     * @return {string}\r\n     * @example\r\n     *      attr('ownerid').text() //owneridname\r\n     */\r\n    text() {\r\n        if (this.contname) {\r\n            if(typeof this.attrname.getText == 'function') {\r\n                return this.attrname.getText();\r\n            }\r\n            var obj = this.attrname.getValue();\r\n            if (Array.isArray(obj)) {\r\n                return obj[0].name;\r\n            }\r\n            return obj;\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * 禁用\r\n     * @method disabled\r\n     * @param  {int} [state=1] 0=启用，1=禁用\r\n     * @required\r\n     * @return {object} this\r\n     * @example\r\n     *      attr('new_name').disabled() //禁用\r\n     *      attr('new_name').disabled(0) //启用\r\n     */\r\n    disabled(state) {\r\n        let disabled = 1;\r\n        if (this.contname) {\r\n            if (state != undefined) {\r\n                disabled = state;\r\n            }\r\n            typeof this.contname.setDisabled === 'function' && this.contname.setDisabled(disabled);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * 绑定或触发change事件\r\n     * @method  change\r\n     * @param  {function} change 触发事件\r\n     * @param  {int} isChange 为1时触发\r\n     * @return {object} this\r\n     * @example\r\n     *      attr('new_name').change() //触发change事件\r\n     *      attr('new_name').change(this.nameChange) //绑定change事件\r\n     *      attr('new_name').change(this.nameChange, 1) //绑定change事件并触发\r\n     */\r\n    change(c, a) {\r\n        if (this.contname) {\r\n            if (typeof(c) == 'function') {\r\n                this.contname.getAttribute().addOnChange(c, false);\r\n                a && setTimeout(() => {\r\n                    this.contname.getAttribute().fireOnChange();\r\n                }, 200)\r\n            } else if (arguments.length === 0) {\r\n                this.contname.getAttribute().fireOnChange();\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * 移除change事件\r\n     * @method removechange\r\n     * @param  {change} change\r\n     * @return {object} this\r\n     */\r\n    removechange(a) {\r\n        if (this.contname) {\r\n            this.contname.getAttribute().removeOnChange(a);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * 字段必填\r\n     * @method required\r\n     * @param  {int} a 0=none,1=required\r\n     * @return {object} this\r\n     * @example\r\n     *      attr('new_name').required() //必填\r\n     *      attr('new_name').required(0) //不必填\r\n     */\r\n    required(a) {\r\n        if (this.attrname) {\r\n            this.attrname.setRequiredLevel(a != 0 ? 'required' : 'none');\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * 提交模式\r\n     * @method mode\r\n     * @param  {int} modetype  1=always,0=never\r\n     * @return {object} this\r\n     * @example\r\n     *      attr('new_name').mode() //始终提交字段值\r\n     *      attr('new_name').mode(0) //不提交字段值\r\n     */\r\n    mode(m) {\r\n        if (this.attrname) {\r\n            let modestr = 'always';\r\n            switch (m) {\r\n            case 1:\r\n                modestr = 'always';\r\n                break;\r\n            case 0:\r\n                modestr = 'never';\r\n                break;\r\n            default:\r\n                break;\r\n            }\r\n            this.attrname.setSubmitMode(modestr);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * 窗体创建时设置默认值\r\n     * @method default\r\n     * @param  {object} val 值\r\n     * @return {object} this\r\n     */\r\n    default(val) {\r\n        if (this.crmEntity.type == 1) {\r\n            this.val(val);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Lookup字段设置当前登录人\r\n     * @method user\r\n     * @return {object} this\r\n     */\r\n    user() {\r\n        if (this.contname) {\r\n            let toValue = {};\r\n            toValue.id = this.crmEntity.userid;\r\n            toValue.entityType = 'systemuser';\r\n            toValue.name = this.crmEntity.username;\r\n            this.val([toValue]);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * 设置lookup 值\r\n     * @method setLookup\r\n     * @param  {string} entityType\r\n     * @param  {guid} id\r\n     * @param  {string} name\r\n     * @return {object} [this]\r\n     * @example\r\n     *      attr('ownerid').setLookup('systemuser','guid','管理员') //设置查找字段值\r\n     */\r\n    setLookup(entityType, id, name) {\r\n        if (this.contname) {\r\n            let toValue = {};\r\n            toValue.id = id;\r\n            toValue.entityType = entityType;\r\n            toValue.name = name || '';\r\n            this.val([toValue]);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * 清除字段值\r\n     * @method clear\r\n     * @return {object} this\r\n     * @example\r\n     *      attr('new_name').clear() //清除字段值\r\n     */\r\n    clear() {\r\n        if (this.contname &&　this.val()) {\r\n            this.val(null);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * 设置焦点\r\n     * @method focus\r\n     * @return {object} this\r\n     */\r\n    focus() {\r\n        if (this.contname) {\r\n            this.contname.setFocus();\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * 判断窗体类型\r\n     * @method type\r\n     * @param  {int} type 窗体类型\r\n     * @return {object} this\r\n     */\r\n    type(type) {\r\n        this.crmEntity.type != type && (this.contname = this.attrname = null)\r\n        return this;\r\n    }\r\n    error(message) {\r\n        window.console && typeof window.console.error === 'function' && window.console.error(message);\r\n    }\r\n    /**\r\n     * 保存实体\r\n     * @method save\r\n     * @return {object} 保存后的事件\r\n     */\r\n    save() {\r\n        return this.crmEntity.save();\r\n    }\r\n    /**\r\n     * @method option\r\n     * @param  {array} arr\r\n     * @param  {string} handle attr方法名\r\n     * @param  {object} state 值\r\n     * @return {object}\r\n     * @example\r\n     *      attr('new_name').option({ 'tab1': '100000000', 'tab2': '100000000', 'tab3': '100000001' }, 'hide').show() //new_name值为100000000时显示tab1、tab2，为100000001显示tab3\r\n     */\r\n    option(obj, handle, state) {\r\n        var arr = [];\r\n        var value = this.val();\r\n        for (var key in obj) {\r\n            var valArr = [].concat(obj[key]).map(item => {\r\n                return item * 1\r\n            })\r\n            new crmEntity(this.Xrm).Tabs(key, handle, state);\r\n            if (valArr.indexOf(value) > -1) {\r\n                arr.push(key);\r\n            }\r\n        }\r\n        return new crmEntityHandle(this.Xrm, arr);\r\n    }\r\n    /**\r\n     * 查找字段带值\r\n     * @method setByVal\r\n     * @param  {array} columns 表单字段列\r\n     * @param  {array} columns1 查找字段列\r\n     * @param  {function} lookupById 查询方法\r\n     * @example\r\n     *      attr('new_productid').setByVal(['new_productname',['ownerid$empty']], ['new_name','ownerid'], request.lookupById) //产品查找产品名称赋值、ownerid为null时赋值,会触发change事件\r\n     */\r\n    setByVal(columns, columns1, lookupById) {\r\n        const columnArr = [].concat(columns);\r\n        const column1Arr = [].concat(columns1);\r\n        if (this.attrname) {\r\n            var value = this.getValue();\r\n            if (!value) {\r\n                this.crmEntity.Controls(columnArr, 'clear');\r\n                return this;\r\n            }\r\n            lookupById(value, column1Arr).then((res, attrs) => {\r\n                for (var i = 0; i < columnArr.length; i++) {\r\n                    let attrName = columnArr[i];\r\n                    if (/\\$empty$/.test(attrName)) {\r\n                        attrName = attrName.replace(/\\$empty$/, '');\r\n                        if ((new crmAttr(this.Xrm, attrName)).val()) {\r\n                            continue;\r\n                        }\r\n                    }\r\n                    let attr = attrs.attributes[column1Arr[i]];\r\n                    attr !== null && (\r\n                        (new crmAttr(this.Xrm, attrName)).setTypeVal(attr)\r\n                    )\r\n                }\r\n            })\r\n        }\r\n        return this\r\n    }\r\n    /**\r\n     * 添加自定义视图\r\n     * @method addCustomView\r\n     * @param  {string}  viewDisplayName 视图名称\r\n     * @param  {string} fetchXml fetchXML字符串\r\n     * @param  {array} columns 显示的列\r\n     * @example\r\n     *      attr('new_productid').addCustomView('可选产品', fetchXml,['new_name']) //添加自定义视图\r\n     */\r\n    addCustomView(viewDisplayName, fetchXml, columns) {\r\n        if (this.contname && [1, 2].indexOf(this.crmEntity.type) > -1) {\r\n            const entityName = this.contname.get_dataContext().get_lookupTypeNames().split(':')[0];\r\n            const columnsStr = columns.map(item => {\r\n                return `<cell name='${item}' width='300' />` }).join('');\r\n            const layoutXml = `<grid name='resultset' object='10' jump='${entityName}id' select='1' icon='1' preview='1'><row name='result' id='${entityName}id'>${columnsStr}</row></grid>`;\r\n            this.contname.addCustomView('{00000000-0000-0000-0000-000000000001}', entityName, viewDisplayName, fetchXml, layoutXml, 1);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     *添加自定义查询条件\r\n     * @method addFilter\r\n     * @param  {function} handle 返回filterXML\r\n     * @param  {string} entityType 可不传\r\n     * @example\r\n     *      productCustomFilter = function() {\r\n     *           return '<filter type=\\'and\\'><condition attribute=\\'new_name\\' operator=\\'like\\' value=\\'%产品%\\' /></filter>';\r\n     *      }\r\n     *      attr('new_productid').addFilter(productCustomFilter) //产品视图添加filter条件\r\n     *\r\n     */\r\n    addFilter(handle, entityType) {\r\n        if (typeof handle === 'function') {\r\n            this.addPreSearch(() => {\r\n                let customFilter = handle();\r\n                this.addCustomFilter(customFilter, entityType) })\r\n        }\r\n        return this;\r\n    }\r\n    addPreSearch(handle) {\r\n        if (this.contname) {\r\n            this.contname.addPreSearch(handle);\r\n        }\r\n        return this;\r\n    }\r\n    addCustomFilter(fetchXmlFilter, entityType) {\r\n        if (this.contname) {\r\n            this.contname.addCustomFilter(fetchXmlFilter, entityType);\r\n        }\r\n        return this;\r\n    }\r\n    //待完善，有问题\r\n    setTypeVal(attr) {\r\n        let value = null;\r\n        if (attr) {\r\n            value = attr.value\r\n        }\r\n        if (this.attrname) {\r\n            if (!attr) {\r\n                this.val(value).change();\r\n                return this;\r\n            }\r\n            switch (attr.type) {\r\n            case 'a:OptionSetValue':\r\n                this.val(value).change();\r\n                break;\r\n            case 'a:EntityReference':\r\n                let toValue = {};\r\n                toValue.id = attr.guid;\r\n                toValue.entityType = attr.logicalName;\r\n                toValue.name = attr.name;\r\n                this.val([toValue]).change();\r\n                break;\r\n            case 'a:EntityCollection':\r\n                this.val(value).change();\r\n                break;\r\n            case 'a:Money':\r\n                this.val(value).change();\r\n                break;\r\n            case 'a:AliasedValue':\r\n                this.val(value).change();\r\n                break;\r\n            case 'c:int':\r\n                this.val(value).change();\r\n                break;\r\n            case 'c:decimal':\r\n                this.val(value).change();\r\n                break;\r\n            case 'c:dateTime':\r\n                this.val(value).change();\r\n                break;\r\n            case 'c:boolean':\r\n                this.val(value).change();\r\n                break;\r\n            default:\r\n                this.val(value).change();\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * 刷新字段值\r\n     * @method refresh\r\n     * @return {object} this\r\n     */\r\n    refresh() {\r\n        if (this.contname) {\r\n            typeof this.contname.refresh === 'function' && this.contname.refresh();\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * 数字字段设置最大值\r\n     * @method setMax\r\n     * @param  {int} value 值\r\n     */\r\n    setMax(value) {\r\n        if (this.attrname) {\r\n            var attribute = this.attrname._attribute;\r\n            var setmax = attribute.set_max;\r\n            typeof setmax === 'function' &&\r\n                (setmax.apply(attribute, [value]))\r\n        }\r\n        return this\r\n    }\r\n    /**\r\n     * 数字字段设置最小值\r\n     * @method setMin\r\n     * @param  {int} value 值\r\n     */\r\n    setMin(value) {\r\n        if (this.attrname) {\r\n            var attribute = this.attrname.\r\n            ttribute;\r\n            var setmin = attribute.set_min;\r\n            typeof setmin === 'function' &&\r\n                (setmin.apply(attribute, [value]))\r\n        }\r\n        return this\r\n    }\r\n    /**\r\n     * 获取crmEntityOption对象\r\n     * @method getOpts\r\n     * @return {object} 返回下拉值操作对象\r\n     * @example\r\n     *      var types = attr('new_type').getOpts()\r\n     *      types.optVal([100000000]) //只显示下拉值100000000\r\n     *      types.optVal([100000001]) //只显示下拉值100000001\r\n     *      types.remove([100000001]) //移除下拉值100000001\r\n     */\r\n    getOpts() {\r\n        return new crmEntityOption(this.contname);\r\n    }\r\n    /**\r\n     * 字段是否编辑\r\n     * @method isDirty\r\n     * @return {Boolean}\r\n     */\r\n    isDirty() {\r\n        if (this.attrname) {\r\n            this.attrname.getIsDirty();\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexport class crmEntity {\r\n    /**\r\n     *crmEntity 初始化对象\r\n     * @class crmEntity\r\n     * @constructor\r\n    */\r\n    constructor(Xrm, Sys) {\r\n        this.Xrm = Xrm;\r\n        this.Sys = Sys;\r\n    }\r\n    /**\r\n    * 获取实体Id\r\n    * @property id\r\n    * @type guid\r\n    * @example\r\n    *       ent.id //guid\r\n    */\r\n    get id() {\r\n        return this.Xrm.Page.data.entity.getId();\r\n    }\r\n    /**\r\n    * 获取实体name\r\n    * @property name\r\n    * @type string\r\n    * @example\r\n    *       ent.name\r\n    */\r\n    get name() {\r\n        return this.Xrm.Page.data.entity.getEntityName();\r\n    }\r\n    /**\r\n    * 获取窗体类型\r\n    * @property type\r\n    * @type string\r\n    * @example\r\n    *       ent.type\r\n    */\r\n    get type() {\r\n        return this.Xrm.Page.ui.getFormType();\r\n    }\r\n    /**\r\n    * 获取登录人id\r\n    * @property userid\r\n    * @type guid\r\n    * @example\r\n    *       ent.userid\r\n    */\r\n    get userid() {\r\n        return this.Xrm.Page.context.getUserId();\r\n    }\r\n    /**\r\n    * 获取登录人name\r\n    * @property username\r\n    * @type string\r\n    * @example\r\n    *       ent.username\r\n    */\r\n    get username() {\r\n        return this.Xrm.Page.context.getUserName();\r\n    }\r\n    /**\r\n    * 判断是否是当前登录人\r\n    * @property userid\r\n    * @type {boolean}\r\n    * @example\r\n    *       ent.isowner()\r\n    */\r\n    isowner() {\r\n        return this.userid == new crmAttr(this.Xrm, 'ownerid').val();\r\n    }\r\n    /**\r\n     * 保存\r\n     * @method save\r\n     * @return {object} 保存成功后事件\r\n     * @example\r\n     *      ent.save().then(function() {\r\n     *          //保存之后执行\r\n     *      })\r\n     */\r\n    save() {\r\n        return this.Xrm.Page.data.save();\r\n    }\r\n    /**\r\n     * 刷新Ribbon\r\n     * @method refRibbon\r\n     */\r\n    refRibbon() {\r\n        return this.Xrm.Page.ui.refreshRibbon();\r\n    }\r\n    /**\r\n     * 刷新实体或刷新列表\r\n     * @method refresh\r\n     */\r\n    refresh() {\r\n        setTimeout(() => {\r\n            this.Sys && this.Sys.Application._components.crmGrid && this.Sys.Application._components.crmGrid.refresh();\r\n            this.Xrm.Page.data && this.Xrm.Page.data.refresh();\r\n        }, 50);\r\n        //this.Xrm.Utility.openEntityForm(this.Xrm.Page.data.entity.getEntityName(), this.Xrm.Page.data.entity.getId())\r\n    }\r\n    /**\r\n     * 重新加载实体\r\n     * @method reload\r\n     */\r\n    reload() {\r\n        setTimeout(() => {\r\n            this.Xrm.Utility.openEntityForm(this.Xrm.Page.data.entity.getEntityName(), this.Xrm.Page.data.entity.getId())\r\n        }, 1)\r\n    }\r\n    /**\r\n     * 禁用或启用窗体所有字段\r\n     * @method disabledAll\r\n     * @param  {int} [state=1] 0=启用,1=禁用\r\n     * @return {object} this\r\n     */\r\n    disabledAll(state) {\r\n        this.Controls(this.Xrm.Page.ui.controls, 'disabled', state);\r\n    }\r\n    /**\r\n     * 禁用或启用窗体部分字段\r\n     * @method disabled\r\n     * @param  {array} arr Tab\\Sections\\Controls\r\n     * @param  {object} {state=1}\r\n     * @return {object} this\r\n     */\r\n    disabled(arr, state) {\r\n        return this.Tabs(arr, 'disabled', state)\r\n    }\r\n    /**\r\n     * 显示窗体部分字段\r\n     * @method show\r\n     * @param  {array} arr Tab\\Sections\\Controls\r\n     * @return {object} this\r\n     */\r\n    show(arr) {\r\n        return this.Tabs(arr, 'show')\r\n    }\r\n    /**\r\n     * 隐藏窗体部分字段\r\n     * @method hide\r\n     * @param  {array} arr Tab\\Sections\\Controls\r\n     * @return {object} this\r\n     */\r\n    hide(arr) {\r\n        return this.Tabs(arr, 'hide')\r\n    }\r\n    /**\r\n     * 验证窗体必填字段\r\n     * @method isValid\r\n     * @return {Boolean}\r\n     */\r\n    isValid() {\r\n        return this.Xrm.Page.data.getIsValid();\r\n    }\r\n    /**\r\n     * 设置窗体字段value值\r\n     * @method val\r\n     * @param  {array} arr Controls\r\n     * @param  {object} value 值\r\n     * @return {object} this\r\n     */\r\n    val(arr, value) {\r\n        const arrCopy = [].concat(arr);\r\n        return this.Controls(arrCopy, 'val', value);\r\n    }\r\n    /**\r\n     * Tabs控制\r\n     * @method Tabs\r\n     * @param  {array} arr Tab\\Sections\\Controls\r\n     * @param  {string} handle crmAttr方法名\r\n     * @param  {object} state 方法参数\r\n     * @example\r\n     *      ent.Tabs(['tab1','tab1_section_1','new_name'], 'disabled').hide() //禁用并隐藏\r\n     */\r\n    Tabs(arr, handle, state) {\r\n        const Xrm = this.Xrm;\r\n        const arrCopy = [].concat(arr);\r\n        let conArr = [].concat(arr)\r\n        arrCopy.forEach((item) => {\r\n            let tab = Xrm.Page.ui.tabs.get(item);\r\n            if (tab) {\r\n                const index = conArr.indexOf(item);\r\n                index > -1 && conArr.splice(index, 1);\r\n                if (handle === 'hide' || handle === 'show') {\r\n                    const disabled = (new crmAttr())[handle].bind({ contname: tab });\r\n                    disabled(state);\r\n                } else {\r\n                    this.Sections(tab.sections.get(), handle, state)\r\n                }\r\n            }\r\n        })\r\n        this.Sections(conArr, handle, state);\r\n        return new crmEntityHandle(this.Xrm, arr);\r\n    }\r\n    /**\r\n     * Sections控制\r\n     * @method Sections\r\n     * @param  {array} arr Sections\\Controls\r\n     * @param  {string} handle crmAttr方法名\r\n     * @param  {object} state 方法参数\r\n     * @return {object} this\r\n     * @example\r\n     *      ent.Tabs(['tab1_section_1','new_name'], 'disabled').hide() //禁用并隐藏\r\n     */\r\n    Sections(sections, handle, state) {\r\n        let conArr = [].concat(sections)\r\n        sections.forEach((section) => {\r\n            let sec = section;\r\n            if (typeof sec === 'string') {\r\n                sec = this.getSections(section) || sec;\r\n            }\r\n            if (typeof sec !== 'string') {\r\n                const index = conArr.indexOf(section);\r\n                index > -1 && conArr.splice(index, 1);\r\n                if (sec.controls.get().length != 0) {\r\n                    this.Controls(sec.controls.get(), handle, state);\r\n                }\r\n                // else {\r\n                //     (new crmAttr()[handle]).apply({contname:sec}, [state])\r\n                // }\r\n            }\r\n        })\r\n        this.Controls(conArr, handle, state);\r\n        return new crmEntityHandle(this.Xrm, sections);\r\n    }\r\n    /**\r\n     * Controls控制\r\n     * @method Controls\r\n     * @param  {array} arr Controls\r\n     * @param  {string} handle crmAttr方法名\r\n     * @param  {object} state 方法参数\r\n     * @return {object} this\r\n     * @example\r\n     *      ent.Tabs(['new_name'], 'disabled').hide() //禁用并隐藏\r\n     */\r\n    Controls(controls, handle, state) {\r\n        var returnArr = [];\r\n        controls.forEach((control) => {\r\n            if (typeof control == 'string') {\r\n                (new crmAttr(this.Xrm, control))[handle](state);\r\n            } else {\r\n                var controlType = control.getControlType();\r\n                if (controlType != 'iframe' && controlType != 'webresource' && controlType != 'subgrid') {\r\n                    returnArr.push((new crmAttr(this.Xrm, control.getName())[handle](state)));\r\n                } else {\r\n                    (new crmAttr()[handle]).apply({ contname: control }, [state])\r\n                }\r\n            }\r\n        });\r\n        return returnArr;\r\n    }\r\n    //获取节对象Sections\r\n    getSections(name) {\r\n        const tabs = this.Xrm.Page.ui.tabs.get();\r\n        for (let index in tabs) {\r\n            let tab = tabs[index];\r\n            const section = tab.sections.getFirst((sec) => {\r\n                return sec.getName() == name;\r\n            })\r\n            if (section) {\r\n                return section;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}\r\n//内部类\r\nexport class crmEntityHandle {\r\n    constructor(Xrm, attrs) {\r\n        this.Xrm = Xrm;\r\n        this.attrs = attrs;\r\n    }\r\n        //禁用或启用\r\n    disabled(state) {\r\n        this.Tabs('disabled', state)\r\n        return this;\r\n    }\r\n        //显示\r\n    show() {\r\n        this.Tabs('show')\r\n        return this;\r\n    }\r\n        //隐藏\r\n    hide() {\r\n        this.Tabs('hide')\r\n        return this;\r\n    }\r\n        //对tab下的字段控制\r\n    Tabs(handle, state) {\r\n        return new crmEntity(this.Xrm).Tabs(this.attrs, handle, state)\r\n    }\r\n}\r\nexport class crmEntityOption {\r\n     /**\r\n     *crmEntityOption 初始化对象(通过crmAttr/getOpts获取)\r\n     * @class crmEntityOption\r\n     * @constructor\r\n    */\r\n    constructor(contname) {\r\n        this.contname = contname;\r\n        this.attrname = contname.getAttribute();\r\n        this.options = [].concat(this.attrname.getOptions());\r\n    }\r\n    /**\r\n     * 设置下拉值\r\n     * @method optVal\r\n     * @param  {array} arr 下拉值\r\n     */\r\n    optVal(arrs) {\r\n        if (Array.isArray(arrs)) {\r\n            const value = this.attrname.getValue();\r\n            this.contname.clearOptions();\r\n            this.options.forEach((item) => {\r\n                if (arrs.indexOf(item.value * 1) >= 0) {\r\n                    this.contname.addOption({ text: item.text, value: item.value })\r\n                }\r\n            })\r\n            this.attrname.setValue(value);\r\n        }\r\n    }\r\n    /**\r\n     * 移除下拉值\r\n     * @method remove\r\n     * @param  {array} arr 下拉值\r\n     */\r\n    remove(arr) {\r\n        var arrs = [].concat(arr)\r\n        arrs.forEach(item => {\r\n            this.contname.removeOption(item)\r\n        })\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/crmEntity.js","/**\r\n * 业务流程操作\r\n * @module crmProcess\r\n */\r\nexport class crmProcess {\r\n    /**\r\n     *crmProcess 初始化对象\r\n     * @class crmProcess\r\n     * @constructor\r\n    */\r\n    constructor(Xrm) {\r\n        this.Xrm= Xrm;\r\n        this.uiProcess = this.Xrm.Page && this.Xrm.Page.ui && this.Xrm.Page.ui.process;\r\n        this.dataProcess = this.Xrm.Page && this.Xrm.Page.data && this.Xrm.Page.data.process;\r\n    }\r\n    /**\r\n     * @method reflow\r\n     * @return {[type]}\r\n     */\r\n    reflow() {\r\n        this.uiProcess.reflow.apply(this.uiProcess, arguments);\r\n    }\r\n    /**\r\n     * @method setDisplayState\r\n     */\r\n    setDisplayState() {\r\n        this.uiProcess.setDisplayState.apply(this.uiProcess, arguments);\r\n    }\r\n    /**\r\n     * @method setVisible\r\n     */\r\n    setVisible() {\r\n        this.uiProcess.setVisible.apply(this.uiProcess, arguments);\r\n    }\r\n    /**\r\n     * @method addOnStageChange\r\n     */\r\n    addOnStageChange() {\r\n        this.dataProcess.addOnStageChange.apply(this.dataProcess, arguments);\r\n    }\r\n    /**\r\n     * @method addOnStageSelected\r\n     */\r\n    addOnStageSelected() {\r\n        this.dataProcess.addOnStageSelected.apply(this.dataProcess, arguments);\r\n    }\r\n    /**\r\n     * @method getActivePath\r\n     * @return {[type]}\r\n     */\r\n    getActivePath() {\r\n        return this.dataProcess.getActivePath.apply(this.dataProcess, arguments);\r\n    }\r\n    /**\r\n     * @method getActiveProcess\r\n     * @return {[type]}\r\n     */\r\n    getActiveProcess() {\r\n        return this.dataProcess.getActiveProcess.apply(this.dataProcess, arguments);\r\n    }\r\n    /**\r\n     * @method getActiveStage\r\n     * @return {[type]}\r\n     */\r\n    getActiveStage() {\r\n        return this.dataProcess.getActiveStage.apply(this.dataProcess, arguments);\r\n    }\r\n    /**\r\n     * @method getEnabledProcesses\r\n     * @return {[type]}\r\n     */\r\n    getEnabledProcesses() {\r\n        return this.dataProcess.getEnabledProcesses.apply(this.dataProcess, arguments);\r\n    }\r\n    /**\r\n     * @method moveNext\r\n     * @return {[type]}\r\n     */\r\n    moveNext() {\r\n        return this.dataProcess.moveNext.apply(this.dataProcess, arguments);\r\n    }\r\n    /**\r\n     * @method movePrevious\r\n     * @return {[type]}\r\n     */\r\n    movePrevious() {\r\n        return this.dataProcess.movePrevious.apply(this.dataProcess, arguments);\r\n    }\r\n    /**\r\n     * @method removeOnStageChange\r\n     * @return {[type]}\r\n     */\r\n    removeOnStageChange() {\r\n        this.dataProcess.removeOnStageChange.apply(this.dataProcess, arguments);\r\n    }\r\n    /**\r\n     * @method removeOnStageSelected\r\n     * @return {[type]}\r\n     */\r\n    removeOnStageSelected() {\r\n        this.dataProcess.removeOnStageSelected.apply(this.dataProcess, arguments);\r\n    }\r\n    /**\r\n     * @method setActiveProcess\r\n     */\r\n    setActiveProcess() {\r\n        return this.dataProcess.setActiveProcess.apply(this.dataProcess, arguments);\r\n    }\r\n    /**\r\n     * @method setActiveStage\r\n     */\r\n    setActiveStage() {\r\n        return this.dataProcess.setActiveStage.apply(this.dataProcess, arguments);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/common/crmProcess.js","/**\r\n * 子网格操作\r\n * @module crmGridList\r\n */\r\nexport class crmGridList {\r\n    /**\r\n     *crmGridList 初始化对象\r\n     * @class crmGridList\r\n     * @constructor\r\n    */\r\n    constructor(Sys, name) {\r\n        this.contname = Sys.Application._components[name];\r\n        if(!this.contname) {\r\n            this.logError(`not crmGridList name : ${this.contname}`)\r\n        }\r\n    }\r\n    /**\r\n     * list\r\n     * @property list\r\n     * @type array\r\n     */\r\n    get list() {\r\n        if(!this.contname) {\r\n            return [];\r\n        }\r\n        return this.contname.get_allRecords()\r\n    }\r\n    /**\r\n     * listIds\r\n     * @property listIds\r\n     * @type array\r\n     */\r\n    get listIds() {\r\n        if(!this.contname) {\r\n            return [];\r\n        }\r\n        return this.contname.get_allRecordIds()\r\n    }\r\n    /**\r\n     * count\r\n     * @property count\r\n     * @type int\r\n     */\r\n    get count() {\r\n        if(!this.contname) {\r\n            return 0;\r\n        }\r\n        return this.contname.get_allRecords().length;\r\n    }\r\n    /**\r\n     * getSelectIds\r\n     * @property getSelectIds\r\n     * @type array\r\n     */\r\n    getSelectIds() {\r\n        if(!this.contname) {\r\n            return [];\r\n        }\r\n        return this.contname.get_selectedIds()\r\n    }\r\n    logError(message) {\r\n        window.console && typeof window.console.error === 'function' && window.console.error(message);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/common/crmGridList.js"],"sourceRoot":""}